(function(e){function t(t){for(var a,n,l=t[0],i=t[1],d=t[2],c=0,m=[];c<l.length;c++)n=l[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,d||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,l=1;l<o.length;l++){var i=o[l];0!==s[i]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=o[0]))}return e}var a={},s={app:0},r=[];function n(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=a,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=i;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},4678:function(e,t,o){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=r(e);return o(t)}function r(e){if(!o.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id="4678"},"55c3":function(e,t,o){"use strict";o("6f93")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("8bbf"),s=o.n(a),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},n=[],l={name:"app",components:{}},i=l,d=(o("034f"),o("2877")),u=Object(d["a"])(i,r,n,!1,null,null,null),c=u.exports,m=o("6389"),h=o.n(m),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"},attrs:{id:"Login"}},[a("center",{staticStyle:{width:"100%"}},[a("img",{attrs:{alt:"Vue logo",src:o("a4c5"),width:"90%",height:"300px"}}),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(this.messsgae))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"20%"}},[a("el-form-item",{attrs:{label:"登录身份"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"学生",value:"student"}}),a("el-option",{attrs:{label:"教师",value:"teacher"}}),a("el-option",{attrs:{label:"管理员",value:"admin"}})],1)],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.uname,callback:function(t){e.$set(e.form,"uname",t)},expression:"form.uname"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"password"},model:{value:e.form.upwd,callback:function(t){e.$set(e.form,"upwd",t)},expression:"form.upwd"}})],1),a("el-checkbox",{on:{click:function(t){return e.changeChecked()}},model:{value:e.pasChecked,callback:function(t){e.pasChecked=t},expression:"pasChecked"}},[e._v("自动登录")]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toRegister()}}},[e._v("注册")])],1)],1)],1)],1)],1)},f=[],b=o("bc3a"),y=o.n(b),g={name:"Login",data:function(){return{form:{type:"student",uname:"",upwd:""},pasChecked:!0,dialogVisible:!1,messsgae:""}},mounted:function(){this.form.uname=this.getCookie("uname"),this.form.upwd=this.getCookie("upwd")},methods:{showDialog:function(e){this.dialogVisible=!0,this.messsgae=e},toRegister:function(){this.$router.push("/Register")},resetForm:function(){this.form.type="",this.form.uname="",this.form.upwd=""},login:function(){var e=this;if(1==this.pasChecked){var t=this.form.uname,o=this.form.upwd;this.setCookie("uname",t,144e4),this.setCookie("upwd",o,144e4)}else if(0==this.pasChecked){this.form.uname,this.form.upwd;this.delCookie("uname"),this.delCookie("upwd")}if(""===this.form.uname||""===this.form.upwd)this.showDialog("请正确填入账户信息！");else{var a=this;y.a.post("/user/login?uname="+this.form.uname+"&upwd="+this.form.upwd+"&type="+this.form.type).then((function(t){"true"===t.data.message&&"student"==a.form.type&&(e.GLOBAL.token=t.data.token,console.log(e.GLOBAL.token),G.push({name:"Student",params:{uname:a.form.uname}})),"true"===t.data.message&&"teacher"==a.form.type&&G.push({name:"Teacher",params:{uname:a.form.uname}}),"true"===t.data.message&&"admin"==a.form.type?G.push({name:"Admin",params:{uname:a.form.uname}}):"false"==t.data.message&&a.showDialog("用户名或密码错误")})).catch((function(e){console.log(e),a.showDialog("请联系管理员,服务器已下线！！")}))}},changeChecked:function(){1==this.pasChecked&&(this.pasChecked=!1),0==this.pasChecked&&(this.pasChecked=!0)},getCookie:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var o=document.cookie.indexOf(";",t);return-1==o&&(o=document.cookie.length),unescape(document.cookie.substring(t,o))}}return""},delCookie:function(e){this.setCookie(e,"",-1)},setCookie:function(e,t,o){var a=new Date;a.setSeconds(a.getSeconds()+o),document.cookie=e+"="+escape(t)+"; expires="+a.toGMTString()}}},w=g,v=Object(d["a"])(w,p,f,!1,null,"4ebaaae6",null),S=v.exports,I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[o("el-container",[o("el-header",{staticStyle:{"text-align":"right","font-size":"25px",height:"60px"}},[o("el-dropdown",[o("i",{staticClass:"el-icon-setting"}),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:e.toLogin}},[e._v("注销")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("本系统由 mabo 独家创作，翻版必究！！")}}},[e._v("关于")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("客服邮箱:2420935619@qq.com")}}},[e._v("客服")])],1)],1)],1),o("span",{staticStyle:{"margin-right":"30px"}},[e._v(" 用户名:"+e._s(this.name))])],1),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v(e._s(this.msg))]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),o("div",[o("el-button",{staticStyle:{"margin-top":"5px",width:"34%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(1)}}},[e._v("查看历史数据")]),o("el-button",{staticStyle:{"margin-top":"5px",width:"25%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(2)}}},[e._v("疫情上报")]),o("el-button",{staticStyle:{"margin-top":"5px",width:"34%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(3)}}},[e._v("完善个人信息")])],1),o("el-main",{staticStyle:{width:"100%"}},[o("el-table",{directives:[{name:"show",rawName:"v-show",value:1===this.showTableName,expression:"this.showTableName===1"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])}),o("el-table-column",{attrs:{prop:"reportdate",label:"上报日期",width:"120"}}),o("el-table-column",{attrs:{prop:"bodytemperature",label:"体温",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bodytemperature>37.3?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.bodytemperature))]):o("span",[e._v(e._s(t.row.bodytemperature))])]}}])}),o("el-table-column",{attrs:{prop:"isconfirm",label:"是否确诊新冠",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isconfirm?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isconfirm))]):o("span",[e._v(e._s(t.row.isconfirm))])]}}])}),o("el-table-column",{attrs:{prop:"isarea",label:"途经风险地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isarea?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isarea))]):o("span",[e._v(e._s(t.row.isarea))])]}}])}),o("el-table-column",{attrs:{prop:"address",label:"上报地点"}})],1),o("el-form",{directives:[{name:"show",rawName:"v-show",value:2===this.showTableName,expression:"this.showTableName===2"}],ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"font-size":"18px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"30%"}},[o("el-form-item",{attrs:{label:"是否确诊新冠"}},[e._v(" 否"),o("el-switch",{model:{value:e.ruleForm.isConfirm2,callback:function(t){e.$set(e.ruleForm,"isConfirm2",t)},expression:"ruleForm.isConfirm2"}}),e._v("是 ")],1),o("el-form-item",{attrs:{label:"途经风险地区"}},[e._v(" 否"),o("el-switch",{model:{value:e.ruleForm.isArea2,callback:function(t){e.$set(e.ruleForm,"isArea2",t)},expression:"ruleForm.isArea2"}}),e._v("是 ")],1),o("el-form-item",{attrs:{label:"当前体温",prop:"bodyTemperature2"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.bodyTemperature2,callback:function(t){e.$set(e.ruleForm,"bodyTemperature2",t)},expression:"ruleForm.bodyTemperature2"}})],1),o("el-form-item",{attrs:{label:"上报地点",prop:"address2"}},[o("el-select",{model:{value:e.ruleForm.address2,callback:function(t){e.$set(e.ruleForm,"address2",t)},expression:"ruleForm.address2"}},e._l(this.addresses,(function(t){return o("el-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),o("el-form-item",{attrs:{label:"上报日期"}},[o("el-form-item",{attrs:{prop:"date2"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日",disabled:!0,"value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即上报")]),o("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1),o("el-form",{directives:[{name:"show",rawName:"v-show",value:3===this.showTableName,expression:"this.showTableName===3"}],staticStyle:{width:"300px"},attrs:{model:e.ruleForm}},[o("el-form-item",{attrs:{label:"出生日期"}},[o("el-date-picker",{staticStyle:{width:"220px"},attrs:{disabled:e.displayUserBase,type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.userBase.birthday,callback:function(t){e.$set(e.userBase,"birthday",t)},expression:"userBase.birthday"}})],1),o("el-form-item",{attrs:{label:"真实姓名"}},[o("el-input",{attrs:{disabled:e.displayUserBase},model:{value:e.userBase.name,callback:function(t){e.$set(e.userBase,"name",t)},expression:"userBase.name"}})],1),o("el-form-item",{attrs:{label:"电话"}},[o("el-input",{attrs:{disabled:e.displayUserBase},on:{change:function(t){return e.isvalidPhone(e.userBase.phone)}},model:{value:e.userBase.phone,callback:function(t){e.$set(e.userBase,"phone",t)},expression:"userBase.phone"}})],1),o("el-form-item",{attrs:{label:"性别"}},[o("el-select",{attrs:{disabled:e.displayUserBase},model:{value:e.userBase.sex,callback:function(t){e.$set(e.userBase,"sex",t)},expression:"userBase.sex"}},e._l(this.sexs,(function(t){return o("el-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),o("el-form-item",{attrs:{label:"身份证号"}},[o("el-input",{attrs:{disabled:e.displayUserBase},on:{change:function(t){return e.isCardID(e.userBase.idCardNumber)}},model:{value:e.userBase.idCardNumber,callback:function(t){e.$set(e.userBase,"idCardNumber",t)},expression:"userBase.idCardNumber"}})],1),o("el-form-item",{attrs:{label:"邮箱"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.userBase.email,callback:function(t){e.$set(e.userBase,"email",t)},expression:"userBase.email"}})],1),o("el-form-item",{attrs:{label:"班级"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.userBase.class,callback:function(t){e.$set(e.userBase,"class",t)},expression:"userBase.class"}})],1),o("el-form-item",{attrs:{disabled:!0}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.displayUserBase,expression:"!displayUserBase"}],attrs:{type:"primary"},on:{click:function(t){return e.submitUserBaseInfo(e.userBase)}}},[e._v("保存")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.displayUserBase,expression:"displayUserBase"}],attrs:{type:"primary"},on:{click:function(t){e.displayUserBase=!1}}},[e._v("编辑")])],1)],1)],1)],1)],1)},k=[],_=(o("a15b"),o("ac1f"),o("1276"),o("b0c0"),{name:"Student",data:function(){return{sexs:["男","女"],addresses:["北京市","天津市","上海市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","台湾省","内蒙古自治区","广西壮族自治区","西藏自治区","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区"],tableData:[],name:this.$route.params.uname,dialogVisible:!1,msg:"",showTableName:1,ruleForm:{address2:"上海市",bodyTemperature2:36.5,isConfirm2:!1,isArea2:!1,date2:this.dateFormatter(new Date)},displayUserBase:!0,userBase:{name:"",birthday:null,email:"",phone:"",sex:"",idCardNumber:"",class:""},rules:{bodyTemperature2:[{required:!0,message:"请输入体温",trigger:"blur"}],date2:[{required:!0,message:"请选择日期",trigger:"blur"}]}}},methods:{dateFormatter:function(e){var t=new Date(e),o=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();t.getHours(),t.getHours(),t.getMinutes(),t.getMinutes(),t.getSeconds(),t.getSeconds();return[o,a,s].join("-")},isCardID:function(e){var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},o="",a=!0;if(e&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))if(t[e.substr(0,2)]){if(18===e.length){e=e.split("");for(var s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],n=0,l=0,i=0,d=0;d<17;d++)l=e[d],i=s[d],n+=l*i;r[n%11];r[n%11]!=e[17]&&(o="校验位错误",a=!1)}}else o="地址编码错误",a=!1;else o="身份证号格式错误",a=!1;a||this.showDialog("你输入的身份证错误"+o+"输入的身份证:"+e)},isvalidPhone:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/,o=t.test(e);!0!==o&&this.showDialog("请输入正确的电话号"+e)},getUserBaseInfo:function(){var e=this;y.a.post("/order-service/getUserBaseInfo?id="+this.name+"&type=student&token="+this.GLOBAL.token).then((function(t){console.log(t);var o=t.data;e.userBase.name=o.name,"undefined"===o.birthday?e.userBase.birthday=null:e.userBase.birthday=o.birthday,e.userBase.email=o.email,e.userBase.phone=o.phone,e.userBase.sex=o.sex,e.userBase.idCardNumber=o.idcardnumber,e.userBase.class=o.classId})).catch((function(t){console.log(t),e.showDialog("服务器已下线，请求失败")}))},submitUserBaseInfo:function(e){var t=this;this.displayUserBase=!0,y.a.post("/order-service/submitUserBaseInfo?id="+this.name+"&name="+e.name+"&birthday="+e.birthday+"&email="+e.email+"&phone="+e.phone+"&sex="+e.sex+"&idCardNumber="+e.idCardNumber+"&type=student&token="+this.GLOBAL.token).then((function(e){"true"===e.data.message?t.showDialog("保存成功"):"false"===e.data.message&&t.showDialog("保存失败")})).catch((function(e){console.log(e),t.showDialog("服务器已下线，上报失败")}))},showDialog:function(e){this.dialogVisible=!0,this.msg=e},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),t.showDialog("请完善提交信息"),!1;var o=t;y.a.post("/order-service/setReportInfo?reportDate="+t.ruleForm.date2+"&bodyTemperature="+t.ruleForm.bodyTemperature2+"&isConfirm="+t.ruleForm.isConfirm2+"&isArea="+t.ruleForm.isArea2+"&address="+t.ruleForm.address2+"&uameId="+t.name+"&token="+t.GLOBAL.token).then((function(e){"true"===e.data.message?(o.showDialog("提交成功"),t.getStudentReportHistory(t.name)):"false"===e.data.message?o.showDialog("提交失败"):"已上报无需重复上报"===e.data.message?(o.showDialog("已上报，更新上报内容成功"),t.getStudentReportHistory(t.name)):"不能超期上报"===e.data.message&&o.showDialog("请正确填报上报日期")})).catch((function(e){console.log(e),o.showDialog("服务器已下线，上报失败")}))}))},handleDelete:function(e,t){console.log(e,t);var o=this;y.a.post("/order-service/deleteStudentReport?uameId="+t.uameid+"&reportDate="+t.reportdate+"&token="+this.GLOBAL.token).then((function(e){console.log(e),!0===e.data.message?(o.showDialog("删除成功"),o.getStudentReportHistory(t.uameid)):!1===e.data.message&&o.showDialog("删除失败")})).catch((function(e){console.log(e),o.showDialog("请联系管理员,服务器已下线！！")}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},toLogin:function(){this.$router.push("/")},showWitch:function(e){this.showTableName=e},resetForm:function(e){this.$refs[e].resetFields()},getStudentReportHistory:function(e){var t=this;y.a.post("/order-service/getStudentReportHistory?uname="+e+"&token="+this.GLOBAL.token).then((function(e){console.log(e);var o=e.data;t.tableData=o})).catch((function(e){console.log(e),t.showDialog("请联系管理员,服务器已下线！！")})),this.showTableName=1}},created:function(){void 0===this.$route.params.uname&&this.$router.push("/"),this.name=this.$route.params.uname,this.getStudentReportHistory(this.name),this.getUserBaseInfo()}}),x=_,R=(o("a9a2"),Object(d["a"])(x,I,k,!1,null,"54ac8f34",null)),N=R.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("center",[a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(this.messsgae))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),a("img",{attrs:{alt:"Vue logo",src:o("a4c5"),width:"90%",height:"300px"}}),a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"20%","label-position":"left"}},[a("el-form-item",{attrs:{label:"登录身份"}},[a("el-select",{staticStyle:{width:"70%"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-option",{attrs:{label:"学生",value:"student"}}),a("el-option",{attrs:{label:"教师",value:"teacher"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"student"===e.ruleForm.type,expression:"ruleForm.type==='student'"}],attrs:{label:"班级",prop:"class"}},[a("el-select",{staticStyle:{width:"70%"},model:{value:e.ruleForm.class,callback:function(t){e.$set(e.ruleForm,"class",t)},expression:"ruleForm.class"}},e._l(e.ruleForm.classes,(function(t){return a("el-option",{key:t.className,attrs:{value:t.classId},on:{change:function(e){}}},[e._v(" "+e._s(t.className)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"用户名",prop:"uname"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.ruleForm.uname,callback:function(t){e.$set(e.ruleForm,"uname",e._n(t))},expression:"ruleForm.uname"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),a("el-form-item",{attrs:{label:"邮箱令牌",prop:"emailPwd"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.ruleForm.emailPwd,callback:function(t){e.$set(e.ruleForm,"emailPwd",e._n(t))},expression:"ruleForm.emailPwd"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.getEmailPwd}},[e._v("获取令牌")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toLogin()}}},[e._v("返回登录")])],1)],1)],1)],1)},T=[],F={name:"Register",data:function(){var e=this,t=function(e,t,o){if(""===t)return o(new Error("班级不能为空"));o()},o=function(e,t,o){return""===t?o(new Error("用户名不能为空")):"isHave"===t?o(new Error("改用户已经存在")):void o()},a=function(t,o,a){""===o?a(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},s=function(t,o,a){""===o?a(new Error("请再次输入密码")):o!==e.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()};return{ruleForm:{pass:"",checkPass:"",uname:"",type:"",class:"",email:"",emailPwd:"",loadEmailPwd:"",classes:[]},dialogVisible:!1,messsgae:"",rules:{pass:[{validator:a,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}],uname:[{validator:o,trigger:"blur"}],class:[{validator:t,trigger:"blur"}]}}},created:function(){var e=this;y.a.post("/getAllclasses").then((function(t){var o=t.data,a=o.getAllClasses;e.ruleForm.classes=a})).catch((function(t){console.log(t),e.showDialog("请联系管理员,服务器已下线！！")}))},methods:{toLogin:function(){this.$router.push("/")},getEmailPwd:function(){var e=this;""===this.ruleForm.email?this.showDialog("请正确填入邮箱!"):y.a.post("/getEmailPwd?email="+this.ruleForm.email+"&uname="+this.ruleForm.uname).then((function(t){console.log(t),console.log(t.data.pwd),e.ruleForm.loadEmailPwd=t.data.pwd,"已存在该用户，无法注册"===e.ruleForm.loadEmailPwd?(e.showDialog("已存在该用户，无法注册！"),e.ruleForm.uname=""):e.showDialog("邮件已发送令牌，3分钟内有效！")})).catch((function(t){console.log(t),e.showDialog("请联系管理员,服务器已下线！！")}))},checkEmailPwd:function(){var e=this,t=this;""!==this.ruleForm.uname&&""!==this.ruleForm.pass||this.showDialog("请正确填入账户信息！"),""===this.ruleForm.class&&"student"===this.ruleForm.type&&this.showDialog("请正确填入账户信息！"),""===this.ruleForm.email||""===this.ruleForm.emailPwd?this.showDialog("请正确填入邮箱和邮箱中获取的令牌！"):y.a.post("/checkEmailPwd?emailPwd="+this.ruleForm.emailPwd+"&uname="+this.ruleForm.uname).then((function(o){console.log(o),console.log("checkEmailPwd"+o.data.message),"成功"===o.data.message?(t.showDialog("注册成功"),e.ruleForm.loadEmailPwd="成功"):"失败"===o.data.message&&(e.ruleForm.loadEmailPwd="失败",t.showDialog("输入的令牌有误"))})).catch((function(e){console.log(e),t.showDialog("请联系管理员,服务器已下线！！")}))},submitForm:function(){var e=this,t=this;this.checkEmailPwd();var o="是";console.log(" this.ruleForm.loadEmailPwd    "+this.ruleForm.loadEmailPwd),""!==this.ruleForm.uname&&""!==this.ruleForm.pass||(this.showDialog("请正确填入账户信息！"),o="否"),""===this.ruleForm.class&&"student"===this.ruleForm.type&&(this.showDialog("请正确填入账户信息！"),o="否"),""!==this.ruleForm.email&&""!==this.ruleForm.emailPwd||(this.showDialog("请正确填入邮箱和邮箱中获取的令牌！"),o="否"),"失败"===this.ruleForm.loadEmailPwd&&(console.log("loadEmailPwd    "+this.ruleForm.loadEmailPwd),this.showDialog("令牌错误,请核对邮箱后重新发送！"),o="否"),console.log(o),"是"===o&&"成功"===this.ruleForm.loadEmailPwd&&y.a.post("/register?uname="+this.ruleForm.uname+"&upwd="+this.ruleForm.pass+"&type="+this.ruleForm.type+"&class="+this.ruleForm.class+"&email="+this.ruleForm.email).then((function(o){console.log(o),console.log(o.data.message),"true"==o.data.message&&"student"===t.ruleForm.type&&G.push({name:"Student",params:{uname:e.ruleForm.uname}}),"true"==o.data.message&&"teacher"===t.ruleForm.type?G.push({name:"Teacher",params:{uname:e.ruleForm.uname}}):"false"==o.data.message&&t.showDialog("该用户已经存在")})).catch((function(e){console.log(e),t.showDialog("请联系管理员,服务器已下线！！")}))},resetForm:function(e){this.$refs[e].resetFields()},showDialog:function(e){this.dialogVisible=!0,this.messsgae=e}}},C=F,D=Object(d["a"])(C,j,T,!1,null,"5a4a2ef8",null),B=D.exports,$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[o("el-container",[o("el-header",{staticStyle:{"text-align":"right","font-size":"25px",height:"60px"}},[o("el-dropdown",[o("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:e.toLogin}},[e._v("注销")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("本系统由 mabo 独家创作，翻版必究！！")}}},[e._v("关于")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("客服邮箱:2420935619@qq.com")}}},[e._v("客服")])],1)],1)],1),o("span",{staticStyle:{"margin-right":"30px"}},[e._v(" 账号:"+e._s(this.name))])],1),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v(e._s(this.msg))]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),o("div",[o("el-button",{staticStyle:{height:"40px",padding:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(1)}}},[e._v("上报历史")]),o("el-button",{staticStyle:{height:"40px",padding:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(2)}}},[e._v("疫情上报")]),o("el-button",{staticStyle:{height:"40px",padding:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(3)}}},[e._v("个人信息")]),o("el-button",{staticStyle:{width:"40%",height:"40px",padding:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(4)}}},[e._v("班级上报统计")]),o("el-button",{staticStyle:{width:"40%",height:"40px",padding:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(5)}}},[e._v("班级上报详情")])],1),o("el-main",[o("el-table",{directives:[{name:"show",rawName:"v-show",value:1===this.showTableName,expression:"this.showTableName===1"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])}),o("el-table-column",{attrs:{prop:"reportDate",label:"上报日期",width:"120"}}),o("el-table-column",{attrs:{prop:"bodyTemperature",label:"体温",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bodyTemperature>37.3?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.bodyTemperature))]):o("span",[e._v(e._s(t.row.bodyTemperature))])]}}])}),o("el-table-column",{attrs:{prop:"isConfirm",label:"是否确诊新冠",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isConfirm?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isConfirm))]):o("span",[e._v(e._s(t.row.isConfirm))])]}}])}),o("el-table-column",{attrs:{prop:"isArea",label:"最近14天是否途经中高风险地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isArea?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isArea))]):o("span",[e._v(e._s(t.row.isArea))])]}}])}),o("el-table-column",{attrs:{prop:"address",label:"上报地点"}})],1),o("el-form",{directives:[{name:"show",rawName:"v-show",value:2===this.showTableName,expression:"this.showTableName===2"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"30%"}},[o("el-form-item",{attrs:{label:"是否确诊新冠"}},[e._v(" 否"),o("el-switch",{model:{value:e.ruleForm.isConfirm2,callback:function(t){e.$set(e.ruleForm,"isConfirm2",t)},expression:"ruleForm.isConfirm2"}}),e._v("是 ")],1),o("el-form-item",{attrs:{label:"途经风险地区"}},[e._v(" 否"),o("el-switch",{model:{value:e.ruleForm.isArea2,callback:function(t){e.$set(e.ruleForm,"isArea2",t)},expression:"ruleForm.isArea2"}}),e._v("是 ")],1),o("el-form-item",{attrs:{label:"当前体温",prop:"bodyTemperature2"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.bodyTemperature2,callback:function(t){e.$set(e.ruleForm,"bodyTemperature2",t)},expression:"ruleForm.bodyTemperature2"}})],1),o("el-form-item",{attrs:{label:"上报地点",prop:"address2"}},[o("el-select",{staticStyle:{width:"200px"},model:{value:e.ruleForm.address2,callback:function(t){e.$set(e.ruleForm,"address2",t)},expression:"ruleForm.address2"}},e._l(this.addresses,(function(t){return o("el-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),o("el-form-item",{attrs:{label:"上报日期"}},[o("el-form-item",{attrs:{prop:"date2"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日",disabled:!0,"value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即上报")]),o("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1),o("el-form",{directives:[{name:"show",rawName:"v-show",value:3===this.showTableName,expression:"this.showTableName===3"}],staticStyle:{width:"300px"},attrs:{model:e.ruleForm}},[o("el-form-item",{attrs:{label:"出生日期"}},[o("el-date-picker",{staticStyle:{width:"220px"},attrs:{disabled:e.displayUserBase,type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.userBase.birthday,callback:function(t){e.$set(e.userBase,"birthday",t)},expression:"userBase.birthday"}})],1),o("el-form-item",{attrs:{label:"真实姓名"}},[o("el-input",{attrs:{disabled:e.displayUserBase},model:{value:e.userBase.name,callback:function(t){e.$set(e.userBase,"name",t)},expression:"userBase.name"}})],1),o("el-form-item",{attrs:{label:"电话"}},[o("el-input",{attrs:{disabled:e.displayUserBase},on:{change:function(t){return e.isvalidPhone(e.userBase.phone)}},model:{value:e.userBase.phone,callback:function(t){e.$set(e.userBase,"phone",t)},expression:"userBase.phone"}})],1),o("el-form-item",{attrs:{label:"性别"}},[o("el-select",{attrs:{disabled:e.displayUserBase},model:{value:e.userBase.sex,callback:function(t){e.$set(e.userBase,"sex",t)},expression:"userBase.sex"}},e._l(this.sexs,(function(t){return o("el-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),o("el-form-item",{attrs:{label:"身份证号"}},[o("el-input",{attrs:{disabled:e.displayUserBase},on:{change:function(t){return e.isCardID(e.userBase.idCardNumber)}},model:{value:e.userBase.idCardNumber,callback:function(t){e.$set(e.userBase,"idCardNumber",t)},expression:"userBase.idCardNumber"}})],1),o("el-form-item",{attrs:{label:"邮箱"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.userBase.email,callback:function(t){e.$set(e.userBase,"email",t)},expression:"userBase.email"}})],1),o("el-form-item",{attrs:{disabled:!0}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.displayUserBase,expression:"!displayUserBase"}],attrs:{type:"primary"},on:{click:function(t){return e.submitUserBaseInfo(e.userBase)}}},[e._v("保存")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.displayUserBase,expression:"displayUserBase"}],attrs:{type:"primary"},on:{click:function(t){e.displayUserBase=!1}}},[e._v("编辑")])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:4===this.showTableName||5===this.showTableName,expression:"this.showTableName===4||this.showTableName===5"}]},[o("div",{staticStyle:{"margin-bottom":"9%"}},[e._v("选择日期 "),o("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:function(t){return e.datePick()}},model:{value:e.reportDate,callback:function(t){e.reportDate=t},expression:"reportDate"}})],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:4===this.showTableName,expression:"this.showTableName===4"}]},[o("span",{staticStyle:{display:"flex","margin-bottom":"10px"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(t){return e.directToClassInfo("全部","已上报")}}},[e._v("全部已上报"+e._s(e.todayStudentReportInfoYes.length)+"人 ")]),parseInt(100*e.todayStudentReportInfoYes.length/(e.todayStudentReportInfoYes.length+e.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*e.todayStudentReportInfoYes.length/(e.todayStudentReportInfoYes.length+e.todayStudentReportInfoNo.length))}}):e._e()],1),o("span",{staticStyle:{display:"flex","margin-bottom":"10px"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%","background-color":"red"},attrs:{type:"primary"},on:{click:function(t){return e.directToClassInfo("全部","未上报")}}},[e._v("全部未上报"+e._s(e.todayStudentReportInfoNo.length)+"人 ")]),parseInt(100*e.todayStudentReportInfoNo.length/(e.todayStudentReportInfoYes.length+e.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*e.todayStudentReportInfoNo.length/(e.todayStudentReportInfoYes.length+e.todayStudentReportInfoNo.length)),color:"red"}}):e._e()],1),e._l(e.selectClasses,(function(t){return o("div",{directives:[{name:"show",rawName:"v-show",value:"全部"!=t.classId,expression:"item.classId!='全部'"}]},[o("span",{staticStyle:{display:"flex","margin-bottom":"50px"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(o){return e.directToClassInfo(t.classId,"已上报")}}},[e._v(" "+e._s(t.classId)+"已上报"+e._s(t.yesNumber)+"人 ")]),parseInt(100*t.yesNumber/(t.yesNumber+t.noNumber))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*t.yesNumber/(t.yesNumber+t.noNumber))}}):e._e()],1),o("span",{staticStyle:{display:"flex","margin-bottom":"50px"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%","background-color":"red"},attrs:{type:"primary"},on:{click:function(o){return e.directToClassInfo(t.classId,"未上报")}}},[e._v(" "+e._s(t.classId)+"未上报"+e._s(t.noNumber)+"人 ")]),parseInt(100*t.noNumber/(t.yesNumber+t.noNumber))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*t.noNumber/(t.yesNumber+t.noNumber)),color:"red"}}):e._e()],1)])}))],2),o("div",{directives:[{name:"show",rawName:"v-show",value:5===this.showTableName,expression:"this.showTableName===5"}],staticStyle:{width:"100%"}},[o("el-form",[o("el-form-item",{attrs:{label:"查询:"}},[o("el-select",{staticStyle:{width:"33%","margin-right":"5%"},model:{value:e.todayStudentReportInfoShowType,callback:function(t){e.todayStudentReportInfoShowType=t},expression:"todayStudentReportInfoShowType"}},e._l(this.todayStudentReportInfoShowTypes,(function(t){return o("el-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),o("el-select",{staticStyle:{width:"40%"},model:{value:e.selectClass,callback:function(t){e.selectClass=t},expression:"selectClass"}},e._l(this.selectClasses,(function(t){return o("el-option",{key:t.classId,attrs:{value:t.classId}},[e._v(" "+e._s(t.classId)+" ")])})),1),o("el-button",{staticStyle:{width:"60%"},attrs:{type:"primary"},on:{click:function(t){return e.searchReportInfo()}}},[e._v("点击查询")])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"!=this.todayStudentReportInfoShowType,expression:"this.todayStudentReportInfoShowType!='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.todayStudentReportInfo}},[o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"学号",width:"120"}}),o("el-table-column",{attrs:{prop:"isConfirm",label:"是否确诊",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isConfirm?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isConfirm))]):o("span",[e._v(e._s(t.row.isConfirm))])]}}])}),o("el-table-column",{attrs:{prop:"isArea",label:"风险地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isArea?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isArea))]):o("span",[e._v(e._s(t.row.isArea))])]}}])}),o("el-table-column",{attrs:{prop:"bodyTemperature",label:"体温",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bodyTemperature>37.3?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.bodyTemperature))]):o("span",[e._v(e._s(t.row.bodyTemperature))])]}}])}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"classId",label:"班级",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"===this.todayStudentReportInfoShowType,expression:"this.todayStudentReportInfoShowType==='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.todayStudentReportInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"学号",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"classId",label:"班级",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1)],1)],1)],1)],1)},P=[],M=(o("a434"),{name:"Teacher",mounted:function(){var e=this;this.timer=setInterval((function(){e.time=(new Date).toLocaleString()}))},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},data:function(){return{reportDate:this.dateFormatter(new Date),time:new Date,classID:[],todayStudentReportInfoShowTypes:["未上报","已上报"],todayStudentReportInfo:[],todayStudentReportInfoYes:[],todayStudentReportInfoNo:[],todayStudentReportInfoShowType:"已上报",selectClass:"全部",selectClasses:[],sexs:["男","女"],addresses:["北京市","天津市","上海市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","台湾省","内蒙古自治区","广西壮族自治区","西藏自治区","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区"],tableData:[],name:this.$route.params.uname,dialogVisible:!1,msg:"",showTableName:4,ruleForm:{address2:"上海市",bodyTemperature2:36.5,isConfirm2:!1,isArea2:!1,date2:this.dateFormatter(new Date)},displayUserBase:!0,userBase:{name:"",birthday:null,email:"",phone:"",sex:"",idCardNumber:""},rules:{bodyTemperature2:[{required:!0,message:"请输入体温",trigger:"blur"}],date2:[{required:!0,message:"请选择日期",trigger:"blur"}]}}},methods:{dateFormatter:function(e){var t=new Date(e),o=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();t.getHours(),t.getHours(),t.getMinutes(),t.getMinutes(),t.getSeconds(),t.getSeconds();return[o,a,s].join("-")},isCardID:function(e){var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},o="",a=!0;if(e&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))if(t[e.substr(0,2)]){if(18===e.length){e=e.split("");for(var s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],n=0,l=0,i=0,d=0;d<17;d++)l=e[d],i=s[d],n+=l*i;r[n%11];r[n%11]!=e[17]&&(o="校验位错误",a=!1)}}else o="地址编码错误",a=!1;else o="身份证号格式错误",a=!1;a||this.showDialog("你输入的身份证错误"+o+"输入的身份证:"+e)},isvalidPhone:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/,o=t.test(e);!0!==o&&this.showDialog("请输入正确的电话号"+e)},directToClassInfo:function(e,t){this.selectClass=e,this.showTableName=5,this.todayStudentReportInfoShowType=t,this.searchReportInfo()},datePick:function(){this.searchReportInfo()},warn:function(e,t){var o=this;y.a.post("/warnReport?id="+t.id).then((function(a){console.log(e),console.log(t.id),console.log(a),"失败"===a.data.message?o.showDialog("提醒失败"):o.showDialog("提醒成功")})).catch((function(e){console.log(e),o.showDialog("服务器已下线，请求失败")}))},searchReportInfo:function(){if(this.teacherStudentTodayReportInfo(),"全部"==this.selectClass)"未上报"==this.todayStudentReportInfoShowType?this.todayStudentReportInfo=this.todayStudentReportInfoNo:"已上报"==this.todayStudentReportInfoShowType&&(this.todayStudentReportInfo=this.todayStudentReportInfoYes);else{var e;"未上报"==this.todayStudentReportInfoShowType?e=this.todayStudentReportInfoNo:"已上报"==this.todayStudentReportInfoShowType&&(e=this.todayStudentReportInfoYes);for(var t=e.length-1;t>=0;t--){var o=e[t];o.classId!=this.selectClass&&e.splice(t,1)}this.todayStudentReportInfo=e}},teacherStudentTodayReportInfo:function(){var e=this;y.a.post("/teacherStudentTodayReportInfo?id="+this.name+"&date="+this.reportDate).then((function(t){console.log(t),e.todayStudentReportInfoYes=t.data.reportStudent,e.todayStudentReportInfoNo=t.data.noReportStudent,e.selectClasses=t.data.teacherAllClass})).catch((function(e){console.log(e)}))},getUserBaseInfo:function(){var e=this;y.a.post("/getUserBaseInfo?id="+this.name+"&type=teacher").then((function(t){var o=t.data;e.userBase.name=o.name,"undefined"===o.birthday?e.userBase.birthday=null:e.userBase.birthday=o.birthday,e.userBase.email=o.email,e.userBase.phone=o.phone,e.userBase.sex=o.sex,e.userBase.idCardNumber=o.idCardNumber})).catch((function(t){console.log(t),e.showDialog("服务器已下线，请求失败")}))},submitUserBaseInfo:function(e){var t=this;this.displayUserBase=!0,y.a.post("/submitUserBaseInfo?id="+this.name+"&name="+e.name+"&birthday="+e.birthday+"&email="+e.email+"&phone="+e.phone+"&sex="+e.sex+"&idCardNumber="+e.idCardNumber+"&type=teacher").then((function(e){console.log(e),"true"===e.data.message?t.showDialog("保存成功"):"false"===e.data.message&&t.showDialog("保存失败")})).catch((function(e){console.log(e),t.showDialog("服务器已下线，上报失败")}))},showDialog:function(e){this.dialogVisible=!0,this.msg=e},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),t.showDialog("请完善提交信息"),!1;var o=t;y.a.post("/setReportInfo?reportDate="+t.ruleForm.date2+"&bodyTemperature="+t.ruleForm.bodyTemperature2+"&isConfirm="+t.ruleForm.isConfirm2+"&isArea="+t.ruleForm.isArea2+"&address="+t.ruleForm.address2+"&uameId="+t.name).then((function(e){console.log(e),"true"===e.data.message?(o.showDialog("提交成功"),t.getStudentReportHistory(t.name)):"false"===e.data.message?o.showDialog("提交失败"):"已上报无需重复上报"===e.data.message?(o.showDialog("已上报，更新上报内容成功"),t.getStudentReportHistory(t.name)):"不能超期上报"===e.data.message&&o.showDialog("请正确填报上报日期")})).catch((function(e){console.log(e),o.showDialog("服务器已下线，上报失败")}))}))},handleDelete:function(e,t){var o=this;y.a.post("/deleteStudentReport?uameId="+t.uameId+"&reportDate="+t.reportDate).then((function(e){!0===e.data.message?(o.showDialog("删除成功"),o.getStudentReportHistory(t.uameId)):!1===e.data.message&&o.showDialog("删除失败")})).catch((function(e){console.log(e),o.showDialog("请联系管理员,服务器已下线！！")}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},toLogin:function(){this.$router.push("/")},showWitch:function(e){this.showTableName=e},resetForm:function(e){this.$refs[e].resetFields()},getStudentReportHistory:function(e){var t=this;y.a.post("/getStudentReportHistory?uname="+e).then((function(e){console.log(e);var o=e.data.getStudentReportHistory;t.tableData=o})).catch((function(e){console.log(e),t.showDialog("请联系管理员,服务器已下线！！")}))}},created:function(){void 0===this.$route.params.uname&&this.$router.push("/"),this.name=this.$route.params.uname,this.getStudentReportHistory(this.name),this.getUserBaseInfo(),this.teacherStudentTodayReportInfo(),this.todayStudentReportInfo=this.todayStudentReportInfoNo}}),Y=M,A=(o("55c3"),Object(d["a"])(Y,$,P,!1,null,"6644896e",null)),L=A.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[o("el-container",[o("el-header",{staticStyle:{"text-align":"right","font-size":"25px",height:"60px"}},[o("el-dropdown",[o("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:e.toLogin}},[e._v("注销")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("本系统由 mabo 独家创作，翻版必究！！")}}},[e._v("关于")])],1),o("el-dropdown-item",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDialog("客服邮箱:2420935619@qq.com")}}},[e._v("客服")])],1)],1)],1),o("span",{staticStyle:{"margin-right":"30px"}},[e._v(" 账号:"+e._s(this.name))])],1),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v(e._s(this.msg))]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),o("div",[o("el-button",{staticStyle:{width:"40%",height:"40px",margin:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(1)}}},[e._v("上报统计")]),o("el-button",{staticStyle:{width:"40%",height:"40px",margin:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(2)}}},[e._v("学生上报详情")]),o("el-button",{staticStyle:{width:"40%",height:"40px",margin:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(3)}}},[e._v("教师上报详情")]),o("el-button",{staticStyle:{width:"40%",height:"40px",margin:"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.showWitch(4)}}},[e._v("教师班级分配")])],1),o("el-main",[o("div",{directives:[{name:"show",rawName:"v-show",value:1===this.showTableName||2===this.showTableName||3===this.showTableName,expression:"this.showTableName===1||this.showTableName===2||this.showTableName===3"}]},[o("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("选择日期 "),o("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:function(t){return e.datePick()}},model:{value:e.reportDate,callback:function(t){e.reportDate=t},expression:"reportDate"}})],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:1===this.showTableName,expression:"this.showTableName===1"}],staticStyle:{"font-size":"15px"}},[o("span",{staticStyle:{display:"flex","margin-bottom":"10%"}},[e._v(" 全校师生已上报人数："+e._s(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length)+"人 "),parseInt(100*(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length)/(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length+e.form2.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length)/(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length+e.form2.todayStudentReportInfoNo.length))}}):e._e(),e._v(" 全校师生未上报人数："+e._s(e.form3.todayStudentReportInfoNo.length+e.form2.todayStudentReportInfoNo.length)+"人 "),parseInt(100-100*(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length)/(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length+e.form2.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100-100*(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length)/(e.form3.todayStudentReportInfoYes.length+e.form2.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length+e.form2.todayStudentReportInfoNo.length)),color:"red"}}):e._e()],1),o("span",{staticStyle:{display:"flex","margin-bottom":"10%"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(t){return e.directToTeacher("已上报")}}},[e._v("教师已上报"+e._s(e.form3.todayStudentReportInfoYes.length)+"人 ")]),parseInt(100*e.form3.todayStudentReportInfoYes.length/(e.form3.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*e.form3.todayStudentReportInfoYes.length/(e.form3.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length))}}):e._e()],1),o("span",{staticStyle:{display:"flex","margin-bottom":"10%"}},[o("el-button",{staticStyle:{height:"40px","background-color":"red","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(t){return e.directToTeacher("未上报")}}},[e._v("教师未上报"+e._s(e.form3.todayStudentReportInfoNo.length)+"人 ")]),parseInt(100*e.form3.todayStudentReportInfoNo.length/(e.form3.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*e.form3.todayStudentReportInfoNo.length/(e.form3.todayStudentReportInfoYes.length+e.form3.todayStudentReportInfoNo.length)),color:"red"}}):e._e()],1),e._l(e.form2.selectClasses,(function(t){return o("div",{directives:[{name:"show",rawName:"v-show",value:"全部"!=t.classId,expression:"item.classId!='全部'"}]},[o("span",{staticStyle:{display:"flex","margin-bottom":"10%"}},[o("el-button",{staticStyle:{height:"40px","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(o){return e.directToStudent("已上报",t.classId)}}},[e._v(e._s(t.classId)+"已上报"+e._s(t.yesNumber)+"人 ")]),parseInt(100*t.yesNumber/(t.yesNumber+t.noNumber))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*t.yesNumber/(t.yesNumber+t.noNumber))}}):e._e()],1),o("span",{staticStyle:{display:"flex","margin-bottom":"50px"}},[o("el-button",{staticStyle:{height:"40px","background-color":"red","margin-right":"10%"},attrs:{type:"primary"},on:{click:function(o){return e.directToStudent("未上报",t.classId)}}},[e._v(e._s(t.classId)+"未上报"+e._s(t.noNumber)+"人 ")]),parseInt(100*t.noNumber/(t.yesNumber+t.noNumber))?o("el-progress",{staticStyle:{"margin-right":"10%"},attrs:{"stroke-width":7,type:"circle",width:70,height:70,percentage:parseInt(100*t.noNumber/(t.yesNumber+t.noNumber)),color:"red"}}):e._e()],1)])}))],2),o("div",{directives:[{name:"show",rawName:"v-show",value:2===this.showTableName,expression:"this.showTableName===2"}]},[o("el-form",[o("el-form-item",{attrs:{label:"查询:"}},[o("el-select",{staticStyle:{width:"30%","margin-right":"3%"},model:{value:e.form2.todayStudentReportInfoShowType,callback:function(t){e.$set(e.form2,"todayStudentReportInfoShowType",t)},expression:"form2.todayStudentReportInfoShowType"}},[o("el-option",{attrs:{label:"未上报",value:"未上报"}}),o("el-option",{attrs:{label:"已上报",value:"已上报"}})],1),e._v(" 班级： "),o("el-select",{staticStyle:{width:"35%"},model:{value:e.form2.selectClass,callback:function(t){e.$set(e.form2,"selectClass",t)},expression:"form2.selectClass"}},e._l(this.form2.selectClasses,(function(t){return o("el-option",{key:t.classId,attrs:{value:t.classId}},[e._v(" "+e._s(t.classId)+" ")])})),1),o("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary"},on:{click:function(t){return e.searchReportInfo2()}}},[e._v("查询")])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"===e.form2.todayStudentReportInfoShowType,expression:"form2.todayStudentReportInfoShowType==='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form2.todayStudentReportInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"学号",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"!=e.form2.todayStudentReportInfoShowType,expression:"form2.todayStudentReportInfoShowType!='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form2.todayStudentReportInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"学号",width:"120"}}),o("el-table-column",{attrs:{prop:"bodyTemperature",label:"体温",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bodyTemperature>37.3?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.bodyTemperature))]):o("span",[e._v(e._s(t.row.bodyTemperature))])]}}])}),o("el-table-column",{attrs:{prop:"isConfirm",label:"是否确诊新冠",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isConfirm?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isConfirm))]):o("span",[e._v(e._s(t.row.isConfirm))])]}}])}),o("el-table-column",{attrs:{prop:"isArea",label:"途经风险地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isArea?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isArea))]):o("span",[e._v(e._s(t.row.isArea))])]}}])}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:3===this.showTableName,expression:"this.showTableName===3"}]},[o("el-form",[o("el-form-item",{attrs:{label:"查询条件"}},[o("el-select",{staticStyle:{width:"30%","padding-right":"5%"},model:{value:e.form3.todayStudentReportInfoShowType,callback:function(t){e.$set(e.form3,"todayStudentReportInfoShowType",t)},expression:"form3.todayStudentReportInfoShowType"}},[o("el-option",{attrs:{label:"未上报",value:"未上报"}}),o("el-option",{attrs:{label:"已上报",value:"已上报"}})],1),o("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:function(t){return e.searchReportInfo3()}}},[e._v("查询")])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"===e.form3.todayStudentReportInfoShowType,expression:"form3.todayStudentReportInfoShowType==='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form3.todayStudentReportInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"工号",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"未上报"!=e.form3.todayStudentReportInfoShowType,expression:"form3.todayStudentReportInfoShowType!='未上报'"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form3.todayStudentReportInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.warn(t.$index,t.row)}}},[e._v("提醒")])]}}])}),o("el-table-column",{attrs:{prop:"id",label:"工号",width:"120"}}),o("el-table-column",{attrs:{prop:"bodyTemperature",label:"体温",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bodyTemperature>37.3?o("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.bodyTemperature))]):o("span",[e._v(e._s(t.row.bodyTemperature))])]}}])}),o("el-table-column",{attrs:{prop:"isConfirm",label:"是否确诊新冠",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isConfirm?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isConfirm))]):o("span",[e._v(e._s(t.row.isConfirm))])]}}])}),o("el-table-column",{attrs:{prop:"isArea",label:"途经风险地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"===t.row.isArea?o("span",{staticStyle:{"background-color":"red",color:"#d7edff"}},[e._v(e._s(t.row.isArea))]):o("span",[e._v(e._s(t.row.isArea))])]}}])}),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),o("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:4===this.showTableName,expression:"this.showTableName===4"}]},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form4.teacherClassesInfo}},[o("div"),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.deleteTeacherClass(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])}),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",width:"120"},on:{click:function(o){return e.toSetTeacherClass(t.$index,t.row)}}},[e._v("新建")])]}}])}),o("el-table-column",{attrs:{prop:"name",label:"教师姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"userId",label:"教师工号",width:"120"}}),o("el-table-column",{attrs:{prop:"classId",label:"班级ID",width:"120"}}),o("el-table-column",{attrs:{prop:"className",label:"班级名称",width:"120"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:5===this.showTableName,expression:"this.showTableName===5"}]},[o("el-form",[o("el-form-item",{attrs:{label:"教师工号:"}},[o("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!0},model:{value:e.form4.teacherId,callback:function(t){e.$set(e.form4,"teacherId",t)},expression:"form4.teacherId"}})],1),o("el-form-item",{attrs:{label:"班级："}},[o("el-select",{staticStyle:{width:"40%","margin-right":"5%"},model:{value:e.form4.setClassId,callback:function(t){e.$set(e.form4,"setClassId",t)},expression:"form4.setClassId"}},e._l(this.form2.selectClasses,(function(t){return o("el-option",{directives:[{name:"show",rawName:"v-show",value:"全部"!==t.classId&&t.classId!==e.form4.classId,expression:"item.classId!=='全部'&&item.classId!==form4.classId"}],key:t.classId,attrs:{value:t.classId}})})),1)],1),o("el-form-item",{attrs:{disabled:!0}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setTeacherClassesInfo()}}},[e._v("提交")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showWich(4)}}},[e._v("返回")])],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:6===this.showTableName,expression:"this.showTableName===6"}]},[o("el-form",{attrs:{model:e.form6.form}},[o("el-form-item",{attrs:{label:"日期"}},[o("el-date-picker",{staticStyle:{width:"60%","padding-right":"5%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","picker-options":e.timeChange,"value-format":"yyyy-MM-dd"},model:{value:e.form6.form.date,callback:function(t){e.$set(e.form6.form,"date",t)},expression:"form6.form.date"}}),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getSystemLog()}}},[e._v("查询")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form6.systemLog,border:"","show-overflow":"","highlight-hover-row":""}},[o("el-table-column",{attrs:{prop:"requestype",label:"请求类型"}}),o("el-table-column",{attrs:{prop:"issuccess",label:"是否请求成功"}}),o("el-table-column",{attrs:{prop:"time",label:"请求响应用时/ms"}}),o("el-table-column",{attrs:{prop:"date",label:"请求时间"}})],1)],1)])],1)],1)},U=[],V=(o("c1df"),{name:"Admin",mounted:function(){var e=this;this.timer=setInterval((function(){e.time=(new Date).toLocaleString()}))},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},data:function(){return{timeChange:{},form2:{todayStudentReportInfo:[],todayStudentReportInfoYes:[],todayStudentReportInfoNo:[],todayStudentReportInfoShowType:"未上报",selectClass:"全部",selectClasses:[]},form3:{todayStudentReportInfo:[],todayStudentReportInfoYes:[],todayStudentReportInfoNo:[],todayStudentReportInfoShowType:"未上报"},form4:{teacherClassesInfo:[],setClassId:"",classId:"",teacherId:""},form6:{systemLog:[],form:{date:null}},reportDate:this.dateFormatter(new Date),time:this.dateFormatter(new Date),name:this.$route.params.uname,dialogVisible:!1,msg:"",showTableName:1}},methods:{dateFormatter:function(e){var t=new Date(e),o=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();t.getHours(),t.getHours(),t.getMinutes(),t.getMinutes(),t.getSeconds(),t.getSeconds();return[o,a,s].join("-")},directToStudent:function(e,t){this.showTableName=2,this.form2.todayStudentReportInfoShowType="未上报"===e?"未上报":"已上报",this.form2.selectClass=t,this.searchReportInfo2()},directToTeacher:function(e){this.showTableName=3,this.form3.todayStudentReportInfoShowType="未上报"===e?"未上报":"已上报",this.searchReportInfo3()},datePick:function(){this.searchReportInfo3()},warn:function(e,t){var o=this;y.a.post("/warnReport?id="+t.id).then((function(a){console.log(e),console.log(t.id),console.log(a),"失败"===a.data.message?o.showDialog("提醒失败"):o.showDialog("提醒成功")})).catch((function(e){console.log(e),o.showDialog("服务器已下线，请求失败")}))},getSystemLog:function(){var e=this;null!==e.form6.form.date?y.a.post("/getSystemLog?date="+e.form6.form.date).then((function(t){console.log(t),"false"===t.data.message?e.showDialog("查询失败"):0===t.data.getSystemLog.length?(e.showDialog("历史数据为空"),e.form6.systemLog=t.data.getSystemLog):(e.showDialog("查询成功"),e.form6.systemLog=t.data.getSystemLog,console.info(e.form6.systemLog.length))})).catch((function(t){console.log(t),e.showDialog("服务器已下线，请求失败")})):e.showDialog("请选择日期")},setTeacherClassesInfo:function(){var e=this,t=this,o=!0;if(""===this.form4.setClassId&&void 0===this.form4.setClassId)o=!1;else for(var a=t.form4.teacherClassesInfo.length-1;a>=0;a--){var s=t.form4.teacherClassesInfo[a];if(s.userId===this.form4.teacherId&&s.classId===this.form4.setClassId){o=!1;break}}!0===o?y.a.post("/setTeacherClassesInfo?id="+t.form4.teacherId+"&classId="+t.form4.setClassId).then((function(o){console.log(o),"true"===o.data.message?(t.showDialog("提交成功"),t.teacherClassesInfo(),e.showTableName=4):"false"===o.data.message&&t.showDialog("提交失败")})).catch((function(e){console.log(e),t.showDialog("服务器已下线，请求失败")})):!1===o&&(console.log(o),t.showDialog("提交错误,请重新选择班级"))},toSetTeacherClass:function(e,t){this.showTableName=5,this.form4.teacherId=t.userId,this.form4.setClassId="",this.form4.classId=t.classId},deleteTeacherClass:function(e,t){if(void 0===t.classId)this.showDialog("该老师暂未分配班级！！");else{var o=this;y.a.post("/deleteTeacherClass?id="+t.userId+"&classId="+t.classId).then((function(e){console.log(e),"true"===e.data.message?(o.showDialog("删除成功"),o.getStudentReportHistory(t.uameId),o.teacherClassesInfo()):"false"===e.data.message&&o.showDialog("删除失败")})).catch((function(e){console.log(e),o.showDialog("服务器已下线，请求失败")}))}},teacherClassesInfo:function(){var e=this;y.a.post("/getTeacherClassesInfo").then((function(t){console.log(t),e.form4.teacherClassesInfo=t.data.getTeacherClassesInfo})).catch((function(e){console.log(e),that.showDialog("服务器已下线，请求失败")}))},searchReportInfo2:function(){if(this.todayReportInfo(),"全部"===this.form2.selectClass)"未上报"===this.form2.todayStudentReportInfoShowType?this.form2.todayStudentReportInfo=this.form2.todayStudentReportInfoNo:"已上报"===this.form2.todayStudentReportInfoShowType&&(this.form2.todayStudentReportInfo=this.form2.todayStudentReportInfoYes);else{var e=null;"未上报"===this.form2.todayStudentReportInfoShowType?e=this.form2.todayStudentReportInfoNo:"已上报"===this.form2.todayStudentReportInfoShowType&&(e=this.form2.todayStudentReportInfoYes);for(var t=e.length-1;t>=0;t--){var o=e[t];o.classId!==this.form2.selectClass&&e.splice(t,1)}this.form2.todayStudentReportInfo=e}},searchReportInfo3:function(){this.todayReportInfo(),"未上报"===this.form3.todayStudentReportInfoShowType?this.form3.todayStudentReportInfo=this.form3.todayStudentReportInfoNo:"已上报"===this.form3.todayStudentReportInfoShowType&&(this.form3.todayStudentReportInfo=this.form3.todayStudentReportInfoYes)},todayReportInfo:function(){var e=this;y.a.post("/todayReportInfo?date="+this.reportDate).then((function(t){console.log(t),e.form2.selectClasses=t.data.student.allClasses,e.form2.todayStudentReportInfoNo=t.data.student.noReport,e.form2.todayStudentReportInfoYes=t.data.student.report,e.form3.todayStudentReportInfoNo=t.data.teacher.noReport,e.form3.todayStudentReportInfoYes=t.data.teacher.report})).catch((function(t){console.log(t),e.showDialog("服务器已下线，请求失败")}))},showDialog:function(e){this.dialogVisible=!0,this.msg=e},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},toLogin:function(){this.$router.push("/")},showWitch:function(e){this.showTableName=e},showWich:function(e){this.showTableName=e},getStudentReportHistory:function(e){var t=this;y.a.post("/getStudentReportHistory?uname="+e).then((function(e){var o=e.data.getStudentReportHistory;t.tableData=o})).catch((function(e){console.log(e),t.showDialog("请联系管理员,服务器已下线！！")}))}},created:function(){void 0===this.$route.params.uname&&this.$router.push("/"),this.name=this.$route.params.uname,this.todayReportInfo(),this.todayStudentReportInfo=this.todayStudentReportInfoNo,this.teacherClassesInfo()}}),E=V,O=(o("e2a7"),Object(d["a"])(E,z,U,!1,null,"2c221339",null)),H=O.exports;s.a.use(h.a);var W=[{path:"/",name:"Home",component:S},{path:"/Student",name:"Student",component:N},{path:"/Register",name:"Register",component:B},{path:"/Teacher",name:"Teacher",component:L},{path:"/Admin",name:"Admin",component:H}],q=new h.a({routes:W}),G=q,X=o("2106"),J=o.n(X),K=(o("0fae"),o("9e2f")),Q=o.n(K);s.a.use(Q.a);o("840a"),o("e508");var Z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},ee=[],te={name:"Global.vue",token:""},oe=te,ae=Object(d["a"])(oe,Z,ee,!1,null,"e582d552",null),se=ae.exports;s.a.config.productionTip=!1,s.a.use(J.a,y.a);var re="http://127.0.0.1:8006";y.a.defaults.baseURL=re,new s.a({router:G,render:function(e){return e(c)}}).$mount("#app"),s.a.prototype.GLOBAL=se,y.a.interceptors.request.use((function(e){return e.headers.Authorization=localStorage.getItem("token"),e}))},6389:function(e,t){e.exports=VueRouter},"6f93":function(e,t,o){},8443:function(e,t,o){},"85ec":function(e,t,o){},"8bbf":function(e,t){e.exports=Vue},a4c5:function(e,t,o){e.exports=o.p+"img/logo_mobile.a850cadc.jpg"},a9a2:function(e,t,o){"use strict";o("8443")},e2a7:function(e,t,o){"use strict";o("e2bb")},e2bb:function(e,t,o){}});
//# sourceMappingURL=app.7621eeec.js.map